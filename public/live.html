
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Live MQTT Monitor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
 style="font-family:system-ui;background:#111;color:#eee;margin:0;">
  <div style="padding:16px;">
    <h2>Live MQTT Monitor</h2>
    <pre id="log" style="background:#1c1c1c;padding:12px;border:1px solid #333;border-radius:8px;min-height:200px;"></pre>
  </div>

  <!-- mqtt.js from CDN -->
  https://unpkg.com/mqtt/dist/mqtt.min.js</script>
  <script>
    const WS_PATH = '/mqtt';
    const TOPIC = 'devices/status';
    const url = `wss://${location.host}${WS_PATH}`;
    const log = document.getElementById('log');

    const client = mqtt.connect(url, { keepalive: 60, reconnectPeriod: 2000 });
    client.on('connect', () => {
      log.textContent += `Connected to ${url}\n`;
      client.subscribe(TOPIC, (err) => {
        log.textContent += err ? `Subscribe error: ${err}\n` : `Subscribed: ${TOPIC}\n`;
      });
    });
    client.on('message', (topic, payload) => {
      log.textContent += `\n${new Date().toLocaleTimeString()} [${topic}] ${payload.toString()}`;
    });
    client.on('error', (e) => { log.textContent += `\nError: ${e}\n`; });
   </script>
</body>
